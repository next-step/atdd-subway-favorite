# μ”κµ¬μ‚¬ν•­ μ„¤λ…

* 1,2λ‹¨κ³„μ—μ„ κµ¬ν„ν• μΈμ¦ λ΅μ§μ— λ€ν• λ¦¬ν©ν„°λ§μ„ μ§„ν–‰ν•μ„Έμ”
* λ‚΄ μ •λ³΄ μμ • / μ‚­μ  κΈ°λ¥μ„ μ²λ¦¬ν•λ” κΈ°λ¥μ„ κµ¬ν„ν•μ„Έμ”.
* Controller μ—μ„ @γ…λ„ν…μ΄μ…μ„ ν™μ©ν•μ—¬ Login μ •λ³΄μ— μ ‘κ·Ό

## μΈμ¦ λ΅μ§μ— λ€ν• λ¦¬ν™ν„°λ§  
  
* μ¤‘λ³µμ΄ λ°μƒλλ” λ¶€λ¶„μ΄λΌκ³  μƒκ°μ΄ λ“ λ‹¤.(Interceptor)       
* λ©”μ„λ“κ°€ μ¤‘λ³µλκΈ°μ—, μΈν„°νμ΄μ¤λ΅ λ¶„λ¦¬ + ISP μ›μΉ™μΌλ΅ κ°κ° ν•λ‚μ”© λ¶„λ¦¬     

**κ·Έλ°λ° κΈ°μ΅΄ μ½”λ“λ¥Ό κ±΄λ“λ¦¬μ§€λ§κ³  μ–΄λ–»κ² μ μ©ν•μ§€? π¤”**   
1. μΈν„°νμ΄μ¤ λ§λ“¤κ³ , μƒλ΅μ΄ μ΄λ¦„μ ν΄λμ¤ λ§λ“¤μ–΄μ„ ν•΄λ‹Ή ν΄λμ¤ ν…μ¤νΈν•κΈ° 
2. μΈν„°νμ΄μ¤ λ§λ“¤κ³ , κµ¬ν„μ²΄λ¥Ό Mock μΌλ΅ ν…μ¤νΈν•κΈ° -> μ‹¤μ  κ°μ²΄λ΅ μ „ν™

μ—¬κΈ°μ„λ” μ™„μ „ν λ™μΌ μΈν„°νμ΄μ¤λ΅ μƒλ΅μ΄κ±Έ λ§λ“ λ‹¤λ©΄(μ„Έμ… -> token) 1λ²μ΄ κ΄μ°®μ§€λ§     
ν„μ¬λ” μ΄λ―Έ λ§λ“¤μ–΄μ§„ 2κ°λ¥Ό μΈν„°νμ΄μ¤λ΅ μ „ν™μ‹ν‚¤λ” μ‘μ—…μ΄λ‹κΉ 2λ²μ΄ κ΄μ°®μ€ κ²ƒ κ°™λ‹¤.   

## λ‚΄ μ •λ³΄ μμ • / μ‚­μ  κΈ°λ¥μ„ μ²λ¦¬ν•λ” κΈ°λ¥μ„ κµ¬ν„ν•μ„Έμ”.

* μ €λ² λ―Έμ…μ— Transactional ν•λ©΄μ„ μ μ©λ¨  

## Controller μ—μ„ @γ…λ„ν…μ΄μ…μ„ ν™μ©ν•μ—¬ Login μ •λ³΄μ— μ ‘κ·Ό   

* ArgumentResolver λ¥Ό λ§λ“¤μ–΄μ„ μ²λ¦¬   
* γ…λ„ν…μ΄μ…μΌλ΅ μƒμ„± κ°€λ¥ν•λ° ν•΄λ΄μ•Όκ² λ‹¤.  

# λ¦¬ν©ν† λ§ κ³Όμ •
> μ•„λ”κ²ƒμ—μ„ λ¨λ¥΄λ” κ²ƒμΌλ΅ + κ°€μ¥ μ‘μ€ λ‹¨μ„λ¶€ν„° ν° κ³³μΌλ΅ 

1. **UserDetailsServiceλ¥Ό μ¶”μƒν™” ν•μ—¬ auth -> member μμ΅΄μ„ μ κ±°ν•κΈ°** 
    * UserDetailsService λ” μ—¬λ¬ μΈν„°μ…‰ν„°μ—μ„ κ³µμ©μΌλ΅ μ‚¬μ©λκ³  μλ‹¤.  
    * μ¦‰, κ°€μ¥ λ¨Όμ € λ¦¬ν©ν„°λ§ν•  λ¶€λ¶„μ΄λΌκ³  μƒκ°μ΄ λ“ λ‹¤.  
2. `convert()` λ¥Ό μΈν„°νμ΄μ¤λ΅ μ¶”μƒν™” 
3. `authenticate()`λ¥Ό μΈν„°νμ΄μ¤λ΅ μ¶”μƒν™” 
4. SecurityContextInterceptor λ΅ μ¶”μƒν™” 

**μƒκ°λ‚ μ **
1. `checkAuthentication()`μ— λ€ν•΄μ„ κ³µν†µλ λ΅μ§μ„ μ‚¬μ©ν•λ―€λ΅ ν…ν”λ¦Ώ λ©”μ„λ“ ν¨ν„΄ κµ¬μ΅°λ„ κ΄μ°®μ„ κ²ƒ κ°™λ‹¤.  
2. CustomUserDetailsService λ” authenticate μ—μ„λ§ μ‚¬μ©ν•λ‹¤.(μ½λ°± ν¨ν„΄λ„ μƒκ°λ‚¬μ§€λ§, μ¤ν”„λ§ μ§€μ› μΈν„°νμ΄μ¤ λ‹¤λ¦„ + μ¤λ²„ μ—”μ§€λ‹λ§)  

**κµ¬ν„ν•λ‹¤λ³΄λ‹**  
1. LoginMember λν•, Auth κ΄€λ ¨ ν΄λμ¤λ“¤μ—μ„ μ‚¬μ©λλ―€λ΅ μ‹¤μ§μ μΌλ΅ auth -> member μμ΅΄μ„±μ΄λΌ νλ‹¨λμ–΄ μ¶”μƒν™” μ μ© 
